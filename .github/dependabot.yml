# Dependabot configuration
# https://docs.github.com/en/code-security/dependabot/dependabot-version-updates

version: 2
updates:
  # GitHub Actions
  - package-ecosystem: 'github-actions'
    directory: '/'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'ci'
    labels:
      - 'dependencies'
      - 'github-actions'

  # Go modules (contract tests and Go service)
  - package-ecosystem: 'gomod'
    directory: '/'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(go)'
    labels:
      - 'dependencies'
      - 'go'
    groups:
      go-deps:
        patterns:
          - '*'

  # Go service (when it exists)
  - package-ecosystem: 'gomod'
    directory: '/services/go-gin'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(go-gin)'
    labels:
      - 'dependencies'
      - 'go'

  # Python services
  - package-ecosystem: 'pip'
    directory: '/services/python-django'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(django)'
    labels:
      - 'dependencies'
      - 'python'

  - package-ecosystem: 'pip'
    directory: '/services/python-flask'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(flask)'
    labels:
      - 'dependencies'
      - 'python'

  # Node.js service
  - package-ecosystem: 'npm'
    directory: '/services/node-express'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(express)'
    labels:
      - 'dependencies'
      - 'javascript'

  # Java service (Spring Boot 3)
  - package-ecosystem: 'maven'
    directory: '/services/java-spring3'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(spring3)'
    labels:
      - 'dependencies'
      - 'java'
    ignore:
      - dependency-name: 'org.springframework.boot:spring-boot-starter-parent'
        versions: ['>=4.0.0']

  # Java service (Spring Boot 2)
  - package-ecosystem: 'maven'
    directory: '/services/java-spring2'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(spring2)'
    labels:
      - 'dependencies'
      - 'java'
    ignore:
      - dependency-name: 'org.springframework.boot:spring-boot-starter-parent'
        versions: ['>=3.0.0']

  # Rust service
  - package-ecosystem: 'cargo'
    directory: '/services/rust-actix'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(actix)'
    labels:
      - 'dependencies'
      - 'rust'

  # .NET service
  - package-ecosystem: 'nuget'
    directory: '/services/csharp-aspnet'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(aspnet)'
    labels:
      - 'dependencies'
      - 'csharp'

  # Ruby service
  - package-ecosystem: 'bundler'
    directory: '/services/ruby-rails'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(rails)'
    labels:
      - 'dependencies'
      - 'ruby'

  # PHP service
  - package-ecosystem: 'composer'
    directory: '/services/php-laravel'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(laravel)'
    labels:
      - 'dependencies'
      - 'php'

  # Docker
  - package-ecosystem: 'docker'
    directory: '/'
    schedule:
      interval: 'weekly'
      day: 'monday'
    commit-message:
      prefix: 'deps(docker)'
    labels:
      - 'dependencies'
      - 'docker'
